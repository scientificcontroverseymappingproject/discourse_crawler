(function(e){function t(t){for(var o,l,i=t[0],n=t[1],u=t[2],d=0,m=[];d<i.length;d++)l=i[d],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&m.push(r[l][0]),r[l]=0;for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);c&&c(t);while(m.length)m.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],o=!0,i=1;i<a.length;i++){var n=a[i];0!==r[n]&&(o=!1)}o&&(s.splice(t--,1),e=l(l.s=a[0]))}return e}var o={},r={app:0},s=[];function l(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=o,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)l.d(a,o,function(t){return e[t]}.bind(null,o));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/discourse_crawler/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],n=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var c=n;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},1:function(e,t){},"1c4e":function(e,t,a){},"1ca0":function(e,t,a){"use strict";a("1c4e")},2:function(e,t){},3:function(e,t){},"3f2e":function(e,t,a){"use strict";a("954a")},"56d7":function(e,t,a){"use strict";a.r(t);var o=a("2b0e"),r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("discourse_crawler")],1)},s=[],l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dashboard",attrs:{id:"body"}},[t("br"),e.showPrint?e._e():t("button",{attrs:{id:"startButton"},on:{click:e.pdfResults}},[e._v(" Save Results as JSON and PDF ")]),e.showProcess3?t("span",{attrs:{id:"mainTitle"}},[e._v(e._s(e.msg))]):e._e(),e.showPassword2?t("img",{attrs:{id:"logo",src:"logo.svg"}}):e._e(),e.showPassword2?t("img",{attrs:{id:"logo2",src:"logo.svg"}}):e._e(),e.showProcess3?t("h1",[e._v(e._s(e.msg7))]):e._e(),e.progress?e._e():t("div",{staticClass:"progress"},[t("div",{staticClass:"color",attrs:{id:"progressColor"}})]),e.pacman?e._e():t("div",{staticClass:"pacman"},[t("div",{staticClass:"pacman__mouth"})]),e.showProcess2?t("p",{attrs:{id:"messageTwo"}},[e._v(" "+e._s(e.msg2)+" ")]):e._e(),e.space?t("div",{attrs:{id:"spacer"}}):e._e(),e.showProcess3?t("h1",{attrs:{id:"mainTitle2"}},[e._v(e._s(e.msg5))]):e._e(),e.loader?e._e():t("div",{staticClass:"loader"}),e.loader2?e._e():t("div",{staticClass:"loader2"}),e.showTagline?t("p",{attrs:{id:"messageThree"}},[e._v(" "+e._s(e.msg3)+" ")]):e._e(),e.showPassword2?t("input",{directives:[{name:"model",rawName:"v-model",value:e.apiKEY,expression:"apiKEY"}],attrs:{id:"passWordInput",type:"password",placeholder:"OpenAI API Key"},domProps:{value:e.apiKEY},on:{input:function(t){t.target.composing||(e.apiKEY=t.target.value)}}}):e._e(),t("br"),e.showPassword2?t("input",{directives:[{name:"model",rawName:"v-model",value:e.apiKEY2,expression:"apiKEY2"}],attrs:{id:"passWordInput2",type:"password",placeholder:"Mistral API Key"},domProps:{value:e.apiKEY2},on:{input:function(t){t.target.composing||(e.apiKEY2=t.target.value)}}}):e._e(),t("br"),e.showPassword2?t("button",{attrs:{id:"startButton"},on:{click:e.checkPassWord}},[e._v(" Submit ")]):e._e(),e.showPassword?t("section",{attrs:{id:"overallVariables2"}},[e.showPrompt?t("section",[t("h2",{attrs:{id:"quant"}},[e._v("Model Selection")]),t("span",{attrs:{id:"model1"}},[e._v("Mistral ")]),t("label",{staticClass:"switch"},[t("input",{attrs:{type:"checkbox",id:"myCheckbox",checked:""},on:{change:function(t){return e.toggleCheck()}}}),t("span",{staticClass:"slider round"})]),t("span",{attrs:{id:"model2"}},[e._v(" OpenAI")]),t("br"),t("br"),e._m(0),e._m(1),t("br"),t("br"),t("hr",{staticClass:"quantLine"}),t("h2",{attrs:{id:"quant"}},[e._v("Quantitative Module")]),e._v(" Priming Text"),t("br"),e.showPrompt?t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.promptInput,expression:"promptInput"}],attrs:{rows:"4",cols:"50",id:"promptInput",type:"text",placeholder:"Analyze the following text, outputting scores between 1 and 10 for "},domProps:{value:e.promptInput},on:{input:function(t){t.target.composing||(e.promptInput=t.target.value)}}}):e._e(),t("br"),e._v(" Variables"),t("br"),e.showPrompt?t("input",{directives:[{name:"model",rawName:"v-model",value:e.variableOne,expression:"variableOne"}],attrs:{id:"variableOneInput",type:"input",placeholder:"Variable One"},domProps:{value:e.variableOne},on:{input:function(t){t.target.composing||(e.variableOne=t.target.value)}}}):e._e(),t("br"),e.showPrompt?t("input",{directives:[{name:"model",rawName:"v-model",value:e.variableTwo,expression:"variableTwo"}],attrs:{id:"variableTwoInput",type:"input",placeholder:"Variable Two"},domProps:{value:e.variableTwo},on:{input:function(t){t.target.composing||(e.variableTwo=t.target.value)}}}):e._e(),t("br"),e.showPrompt?t("input",{directives:[{name:"model",rawName:"v-model",value:e.variableThree,expression:"variableThree"}],attrs:{id:"variableThreeInput",type:"input",placeholder:"Variable Three"},domProps:{value:e.variableThree},on:{input:function(t){t.target.composing||(e.variableThree=t.target.value)}}}):e._e(),t("br"),e.showPrompt?t("input",{directives:[{name:"model",rawName:"v-model",value:e.variableFour,expression:"variableFour"}],attrs:{id:"variableFourInput",type:"input",placeholder:"Variable Four"},domProps:{value:e.variableFour},on:{input:function(t){t.target.composing||(e.variableFour=t.target.value)}}}):e._e(),t("br"),e.showPrompt?t("input",{directives:[{name:"model",rawName:"v-model",value:e.variableFive,expression:"variableFive"}],attrs:{id:"variableFiveInput",type:"input",placeholder:"Variable Five"},domProps:{value:e.variableFive},on:{input:function(t){t.target.composing||(e.variableFive=t.target.value)}}}):e._e(),t("br"),e.showPrompt?t("input",{directives:[{name:"model",rawName:"v-model",value:e.variableSix,expression:"variableSix"}],attrs:{id:"variableSixInput",type:"input",placeholder:"Variable Six"},domProps:{value:e.variableSix},on:{input:function(t){t.target.composing||(e.variableSix=t.target.value)}}}):e._e(),t("br"),t("br"),t("hr",{staticClass:"quantLine"}),t("h2",{attrs:{id:"qual"}},[e._v("Qualitative Module")]),e._v(" Prompt"),t("br"),e.showPrompt?t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.promptInput2,expression:"promptInput2"}],attrs:{rows:"4",cols:"50",id:"promptInput",type:"text",placeholder:"Perform sentiment analysis on the following text, outputting scores between 1 and 10 for "},domProps:{value:e.promptInput2},on:{input:function(t){t.target.composing||(e.promptInput2=t.target.value)}}}):e._e(),t("br"),t("br"),t("hr",{staticClass:"quantLine"}),t("h2",{attrs:{id:"urlInputHeader"}},[e._v("URL Input")]),t("span",{attrs:{id:"urlInputHeaderInstructions"}},[e._v("URL(s) to Crawl")]),t("br"),e.showProcess?t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.urlToScrape,expression:"urlToScrape"}],attrs:{rows:"4",cols:"50",id:"URLInput",type:"input",placeholder:"Enter URL to Crawl"},domProps:{value:e.urlToScrape},on:{input:function(t){t.target.composing||(e.urlToScrape=t.target.value)}}}):e._e(),e._v(" "),t("br"),e.dataInput?t("input",{attrs:{id:"fileUpload",type:"file"}}):e._e(),t("br"),t("hr",{staticClass:"quantLine"}),t("br"),t("p"),e.showProcess?t("button",{attrs:{id:"startButton"},on:{click:e.checkForQualQuantSummary}},[e._v(" Crawl Website(s)")]):e._e(),t("br"),e.showDataButon?t("button",{attrs:{id:"startButton"},on:{click:e.runPromptsOnData}},[e._v(" Run Prompts on Data ")]):e._e()]):e._e(),t("p",{attrs:{id:"results"}},[t("span",{attrs:{id:"overallMoralFoundations"}}),t("br"),t("section",{attrs:{id:"overalExplanation2"}},[e.overallQuant?t("h2",[e._v(" Summary of "),t("span",{staticStyle:{color:"hotpink"}},[e._v("Quantitative")]),e._v(" Analysis ")]):e._e(),t("span",{attrs:{id:"overallVariables"}})])]),e.showProcess2?e._e():t("section",{attrs:{id:"overalExplanation"}},[e._m(2),e._v(" "+e._s(e.overallOutputExplanation)+" ")]),t("p",{attrs:{id:"terminal"}}),e.showProcess2?e._e():t("section",[e._m(3),t("br")]),t("section",{staticClass:"visuals",attrs:{id:"visuals"}}),t("br"),t("section",{attrs:{id:"rawData2"}}),t("section",{attrs:{id:"specificAnalysis5"}}),t("br"),t("br"),e.log?t("section",[t("hr"),t("span",{attrs:{id:"logTitle"}},[e._v("Crawl and Analysis Log")]),t("hr")]):e._e(),e._m(4),t("section",{attrs:{id:"specificAnalysis"}}),t("section",{attrs:{id:"specificAnalysis2"}}),t("section",{attrs:{id:"specificAnalysis3"}}),t("section",{attrs:{id:"specificAnalysis4"}})]):e._e(),e._m(5),t("a",{staticStyle:{display:"none"},attrs:{id:"downloadAnchorElem"}})])},i=[function(){var e=this,t=e._self._c;return t("span",{attrs:{id:"dropdownWrapper"}},[t("label",{attrs:{for:"analysisModel",alt:"Choose model for analysis module"}}),e._v(" Analysis Model / Summary Model"),t("br"),t("select",{attrs:{name:"analysisModel",id:"analysisModel"}},[t("option",{attrs:{value:"gpt-4-turbo"}},[e._v("gpt-4-turbo")]),t("option",{attrs:{selected:"selected",value:"gpt-3.5-turbo"}},[e._v("gpt-3.5-turbo")]),t("option",{attrs:{disabled:"disabled",value:"open-mistral-7b"}},[e._v("open-mistral-7b")]),t("option",{attrs:{disabled:"disabled",value:"mistral-medium-latest"}},[e._v("mistral-medium-latest")]),t("option",{attrs:{disabled:"disabled",value:"mistral-large-latest"}},[e._v("mistral-large-latest")])])])},function(){var e=this,t=e._self._c;return t("span",{attrs:{id:"dropdownWrapper2"}},[t("label",{attrs:{for:"summaryModel",alt:"Choose model for analysis summary"}}),t("select",{attrs:{name:"summaryModel",id:"summaryModel"}},[t("option",{attrs:{selected:"selected",value:"gpt-4-turbo"}},[e._v("gpt-4-turbo")]),t("option",{attrs:{value:"gpt-3.5-turbo"}},[e._v("gpt-3.5-turbo")]),t("option",{attrs:{disabled:"disabled",value:"open-mistral-7b"}},[e._v("open-mistral-7b")]),t("option",{attrs:{disabled:"disabled",value:"mistral-medium-latest"}},[e._v("mistral-medium-latest")]),t("option",{attrs:{disabled:"disabled",value:"mistral-large-latest"}},[e._v("mistral-large-latest")])])])},function(){var e=this,t=e._self._c;return t("h2",[e._v(" Summary of "),t("span",{staticStyle:{color:"orange"}},[e._v("Qualitative")]),e._v(" Analysis ")])},function(){var e=this,t=e._self._c;return t("h2",{attrs:{id:"overalExplanation3"}},[t("span",{staticStyle:{color:"white"}},[t("span",{staticStyle:{color:"rgb(113, 198, 139)"}},[e._v("Individual")]),e._v(" Text Summaries")])])},function(){var e=this,t=e._self._c;return t("section",{attrs:{id:"log"}},[t("ul",{attrs:{id:"logItems"}})])},function(){var e=this,t=e._self._c;return t("footer",[t("a",{attrs:{href:"https://discourse-crawler.gitbook.io/discourse_crawler/"}},[t("button",{attrs:{id:"docs"}},[e._v("Instructions and Technical Documentation")])])])}],n=(a("14d9"),a("5b81"),a("0e14")),u=a("cee4"),c=a("61cc"),d=a.n(c),m=a("f25b"),p=a.n(m),h={name:"discourse_crawler",props:{},data(){return{msg:"discourse _ crawler",msg2:"",msg3:"An AI-powered tool for performing top-level analysis of websites.",msg5:"",msg6:"",msg7:"",pacman:!0,progress:!0,rawData:!0,loader:!0,loader2:!0,overallQuant:!1,urlToScrape:"https://www.milesccoleman.com/test$",urlToScrape2:"",pageText:"",pageType:"whole",one:0,two:0,three:0,four:0,five:0,six:0,showPassword:!1,password:"superSecretPassword",showPassword2:!0,userPassword:"",readability:0,loading:!0,showProcess:!0,showProcess2:!0,showProcess3:!0,showPrompt:!0,anchorsForCrawl:[],secondIteration:!1,JSON1:null,JSON2:null,JSON3:null,JSON4:null,moralFoundationAnalysis:"",apiKEY:"",apiKEY2:"",apiURL:"https://api.openai.com/v1/chat/completions",apiURL2:"https://api.mistral.ai/v1/chat/completions",analysisModel:"gpt-3.5-turbo",analysisModel2:"mistral-medium-latest",summaryModel:"gpt-4-turbo",summaryModel2:"mistral-large-latest",promptInput:"Perform sentiment analysis on the following text, outputting scores between 1 and 10 for ",promptInput2:"Analyze this text to identify the moral foundations that it represents out of care, fairness, loyalty, authority, and purity. Include an explanation in under 50 words that explains the identified moral foundations. Text: ",variableOne:"anger",variableTwo:"fear",variableThree:"happiness",variableFour:"surprise",variableFive:"sadness",variableSix:"disgust",unique:[],overallSummaryOutput:"",overallOutputExplanation:"",showPrint:!0,qualQuantSummary:!1,dataSet:"",JSONHolder:"",dataInput:!1,showDataButon:!1,delayTime:3e3,mistralDelay:5e3,overallNumber:"",goAhead:!1,robotsDomain:"",robotsDotText:"",proxyRobotsUrl:"",log:!1,logContent:"",openAI:!0,mistral:!1,showTagline:!0,space:!1,noQuantUsed:!0,elementInListOfURLs:"",listCount:0,overallVariableOne:0,overallVariableTwo:0,overallVariableThree:0,overallVariableFour:0,overallVariableFive:0,overallVariableSix:0}},created:function(){},methods:{urlListMode:function(){this.registerVariables(),this.msg="Initializing",this.msg2="",this.showProcess=!1;const e=this.urlToScrape;if(this.listCount=0,!0===this.openAI&&(this.logContent="🌩️ discourse_crawler: model selected: openai: current models in use: "+this.analysisModel+" (quantitative analysis and qualitative analysis);"+this.summaryModel+" (qualitative summary)",this.outputToLog()),!0===this.mistral&&(this.logContent="🌩️ discourse_crawler: model selected: mistral: current models in use: "+this.analysisModel+" (quantitative analysis and qualitative analysis);"+this.summaryModel+" (qualitative summary)",this.outputToLog()),e.endsWith("\r\n")){const t=e.slice(0,-4),a='"'+t.replace(/(\r\n|\r|\n)/g,'","'),o="["+a+'"]',r=JSON.parse(o),s=r.length;console.log(s+r),r.forEach(e=>this.checkBots2(e,s)),setTimeout(()=>{console.log(this.anchorsForCrawl),this.grabSubpages()},1e3*s)}if(e.endsWith("\r")||e.endsWith("\n")){const t=e.slice(0,-2),a='"'+t.replace(/(\r\n|\r|\n)/g,'","'),o="["+a+'"]',r=JSON.parse(o),s=r.length;console.log(s+r),r.forEach(e=>this.checkBots2(e,s)),setTimeout(()=>{console.log(this.anchorsForCrawl),this.grabSubpages()},1e3*s)}else{const t=e,a='"'+t.replace(/(\r\n|\r|\n)/g,'","'),o="["+a+'"]',r=JSON.parse(o),s=r.length;console.log(s+r),r.forEach(e=>this.checkBots2(e,s)),setTimeout(()=>{console.log(this.anchorsForCrawl),this.grabSubpages()},1e3*s)}},outputToLog:function(){var e=document.createElement("li");e.appendChild(document.createTextNode(this.logContent)),document.getElementById("logItems").appendChild(e);var t=document.getElementById("log");t.scrollTop=t.scrollHeight},toggleCheck:function(){!0===document.getElementById("myCheckbox").checked?(this.openAI=!0,this.mistral=!1,document.getElementById("model2").style.color="#71c68b",document.getElementById("model1").style.color="white",console.log("OpenAI selected"),document.getElementById("analysisModel").selectedIndex=1,document.getElementById("summaryModel").selectedIndex=0,document.getElementById("analysisModel").options[0].disabled=!1,document.getElementById("analysisModel").options[1].disabled=!1,document.getElementById("summaryModel").options[0].disabled=!1,document.getElementById("summaryModel").options[1].disabled=!1,document.getElementById("analysisModel").options[2].disabled=!0,document.getElementById("analysisModel").options[3].disabled=!0,document.getElementById("analysisModel").options[4].disabled=!0,document.getElementById("summaryModel").options[2].disabled=!0,document.getElementById("summaryModel").options[3].disabled=!0,document.getElementById("summaryModel").options[4].disabled=!0):(this.openAI=!1,this.mistral=!0,document.getElementById("model1").style.color="hotpink",document.getElementById("model2").style.color="white",console.log("Mistral selected"),this.apiKEY=this.apiKEY2,this.apiURL=this.apiURL2,this.summaryModel=this.summaryModel2,this.analysisModel=this.analysisModel2,this.mistralDelay=2e4,document.getElementById("analysisModel").selectedIndex=3,document.getElementById("summaryModel").selectedIndex=4,document.getElementById("analysisModel").options[0].disabled=!0,document.getElementById("analysisModel").options[1].disabled=!0,document.getElementById("summaryModel").options[0].disabled=!0,document.getElementById("summaryModel").options[1].disabled=!0,document.getElementById("analysisModel").options[2].disabled=!1,document.getElementById("analysisModel").options[3].disabled=!1,document.getElementById("analysisModel").options[4].disabled=!1,document.getElementById("summaryModel").options[2].disabled=!1,document.getElementById("summaryModel").options[3].disabled=!1,document.getElementById("summaryModel").options[4].disabled=!1)},registerVariables:function(){this.showPrompt=!1;const e=this.urlToScrape;""!=this.variableOne&&""!=this.promptInput2||alert("No variables have been entered. Quantitative analysis will not be performed. Click okay to proceed with only qualitative analysis. Otherwise refresh the page and start over."),(e.endsWith("/")||e.includes("\r\n"))&&e.includes("\r")&&e.includes("\n")||(this.urlToScrape=this.urlToScrape+"/",console.log("added slash"))},checkPassWord:function(){this.showPassword=!0,this.showPassword2=!1,this.msg="",this.msg2="",this.showTagline=!1},checkBots:function(){!0===this.openAI&&(this.logContent="🌩️ discourse_crawler: model selected: openai: current models in use: "+this.analysisModel+" (quantitative analysis and qualitative analysis); "+this.summaryModel+" (qualitative summary)",this.outputToLog()),!0===this.mistral&&(this.logContent="🌩️ discourse_crawler: model selected: mistral: current models in use: "+this.analysisModel+" (quantitative analysis and qualitative analysis); "+this.summaryModel+" (qualitative summary)",this.outputToLog());var e=this.urlToScrape.split("/"),t=e[0],a=e[2];this.robotsDomain=t+"//"+a,this.proxyRobotsUrl="https://api.allorigins.win/raw?url="+encodeURIComponent(this.robotsDomain+"/robots.txt");const o=this.proxyRobotsUrl;console.log(o),this.logContent="🌐 discourse_crawler: checking robots.txt at: "+this.robotsDomain,this.outputToLog(),u["a"].get(o).then(e=>{this.robotsDotText=e.data,console.log(this.robotsDotText),this.logContent="🤖 discourse_crawler: robots.txt: "+this.robotsDotText,this.outputToLog();const t=p()({userAgent:"Googlebot",allowOnNeutral:!1});t.parseRobots(this.robotsDomain,this.robotsDotText),t.canCrawlSync(this.robotsDomain),t.canCrawl(this.robotsDomain,e=>{console.log(this.robotsDomain+": main Page Crawlable: ",e),this.goAhead=e,1==this.goAhead?(this.logContent="✅ discourse_crawler: "+this.robotsDomain+": main Page Crawlable: "+e,this.outputToLog(),this.grabPage(),this.goAhead=!1):(this.msg="discourse_crawler: Cannot crawl page as per robots.txt",this.logContent="🔴 discourse_crawler: "+this.robotsDomain+": cannot crawl as per robots.txt",this.outputToLog(),this.goAhead=!1)})}).catch(e=>{console.log(e)})},checkBots2:function(e,t){this.listCount=this.listCount+1;var a=e.split("/"),o=a[0],r=a[2];const s=o+"//"+r,l="https://api.allorigins.win/raw?url="+encodeURIComponent(s+"/robots.txt"),i=l;console.log(i),u["a"].get(i).then(a=>{this.logContent="🌐 discourse_crawler: checking robots.txt at: "+s,this.outputToLog(),console.log("total"+t),console.log(this.listCount+" "+e);const o=a.data;console.log(o),this.logContent="🤖 discourse_crawler: robots.txt: "+o,this.outputToLog();const r=p()({userAgent:"Googlebot",allowOnNeutral:!1});r.parseRobots(s,o),r.useRobotsFor(s),r.canCrawlSync(e),r.canCrawl(e,t=>{console.log(e+": Page Crawlable: ",t),this.goAhead=t,1==this.goAhead?(this.logContent="✅ discourse_crawler: "+e+": main Page Crawlable: "+t,this.outputToLog(),this.anchorsForCrawl.push(e),console.log(this.anchorsForCrawl),this.goAhead=!1):(this.logContent="🔴 discourse_crawler: "+e+": cannot crawl as per robots.txt",this.outputToLog(),console.log(this.anchorsForCrawl),this.goAhead=!1)})}).catch(e=>{console.log(e)})},checkForQualQuantSummary:function(){const e=this.urlToScrape;console.log(e),this.progress=!1,this.analysisModel=document.getElementById("analysisModel").value,this.analysisModel2=document.getElementById("analysisModel").value,this.summaryModel=document.getElementById("summaryModel").value,this.summaryModel2=document.getElementById("summaryModel").value,"data"==e&&(this.dataInput=!0,this.showDataButon=!0,this.msg="Initializing",this.msg2="",this.showProcess=!1,this.progress=!0,this.msg="",document.getElementById("urlInputHeader").innerHTML="Data Input",document.getElementById("urlInputHeaderInstructions").innerHTML="Select JSON data file (should only contain values for 'name' and 'text')."),(e.includes("\r\n")||e.includes("\r")||e.includes("\n"))&&(e.endsWith("$")?(this.log=!0,this.qualQuantSummary=!0,this.urlToScrape=e.slice(0,-1),console.log("qualquant summary for "+this.urlToScrape),this.urlListMode()):(console.log("missed"),this.log=!0,this.urlListMode())),"data"==e||e.includes("\r\n")||e.includes("\r")||e.includes("\n")||(e.endsWith("$")?(this.log=!0,this.qualQuantSummary=!0,this.urlToScrape=e.slice(0,-1),console.log("qualquant summary for "+this.urlToScrape),this.checkBots()):(console.log("missed"),this.log=!0,this.checkBots()))},runPromptsOnData:function(){this.log=!0,this.registerData(),this.registerVariables(),setTimeout(()=>{this.getEmotionStats()},3e3)},registerData:function(){const e=this;var t=document.getElementById("fileUpload").files;if(t.length<=0)return!1;var a=new FileReader;a.onload=function(t){var a=JSON.parse(t.target.result);e.dataSet=a,e.overallNumber=a.length},a.readAsText(t.item(0))},grabPage:function(){this.registerVariables(),this.msg="Initializing",this.msg2="",this.showProcess=!1;const e="https://api.allorigins.win/raw?url="+encodeURIComponent(this.urlToScrape),t=p()({userAgent:"Googlebot",allowOnNeutral:!1});u["a"].get(e).then(e=>{const a=e.data,o=a.replace(/\s+/g," ").trim(),r=new DOMParser,s=r.parseFromString(o,"text/html"),l=s;l.querySelectorAll("script, style").forEach(e=>e.remove());let i=l.querySelector("body").innerText.trim();if(0==this.secondIteration){var n=[],u=s.links;n.push(this.urlToScrape);const e=s.links.length;for(var c=0;c<u.length;c++){const a=c;if(s.links[c].href.includes(this.urlToScrape)&&(s.links[c].href.includes(".pdf")&&(this.logContent="🔴 discourse_crawler: "+s.links[c].href+": cannot crawl (broken link or uncrawlable file)",this.outputToLog()),s.links[c].href.includes(".pdf")||(t.parseRobots(this.robotsDomain,this.robotsDotText),t.useRobotsFor(this.robotsDomain),t.canCrawlSync(s.links[c].href),t.canCrawl(s.links[c].href,t=>{this.goAhead=t,1==this.goAhead?(n.push(u[c].href),console.log(s.links[c].href+": crawlable: ",t),this.goAhead=!1,this.logContent="✅ discourse_crawler: "+s.links[c].href+": crawlable: "+t,this.outputToLog()):(console.log(u[c].href+": cannot crawl page as per robots.txt"),this.goAhead=!1,this.logContent="🔴 discourse_crawler: "+u[c].href+": cannot crawl page as per robots.txt",this.outputToLog()),a===e-1&&(this.pageText=i,this.anchorsForCrawl=n.filter((function(e,t){return n.indexOf(e)==t})),setTimeout(()=>{console.log("Delayed for 3 seconds."),this.grabSubpages()},3e3))}))),s.links[c].href.includes(window.location.origin)&&(s.links[c].href.includes(".pdf")&&(this.logContent="🔴 discourse_crawler: "+s.links[c].href+": cannot crawl (broken link or uncrawlable file)",this.outputToLog()),!s.links[c].href.includes(".pdf"))){const o=this.urlToScrape+s.links[c].href.replace(window.location.origin+"/","");t.parseRobots(this.robotsDomain,this.robotsDotText),t.useRobotsFor(this.robotsDomain),t.canCrawlSync(o),t.canCrawl(o,t=>{this.goAhead=t,1==this.goAhead?(n.push(o),console.log(o+": crawlable: ",t),this.goAhead=!1,this.logContent="✅ discourse_crawler: "+s.links[c].href+": crawlable: "+t,this.outputToLog()):(console.log(o+": cannot crawl page as per robots.txt"),this.goAhead=!1,this.logContent="🔴 discourse_crawler: "+u[c].href+": cannot crawl page as per robots.txt",this.outputToLog()),a===e-1&&(this.pageText=i,this.anchorsForCrawl=n.filter((function(e,t){return n.indexOf(e)==t})),setTimeout(()=>{console.log("Delayed for 3 seconds."),this.grabSubpages()},3e3))})}}}}).catch(e=>{console.log(e),this.msg=e,this.logContent="💀 discourse_crawler: "+e,this.outputToLog()})},grabSubpages:function(){let e,t=this.anchorsForCrawl.length;console.log(this.anchorsForCrawl),this.logContent="🔗 discourse_crawler: URLs to be scraped: "+this.anchorsForCrawl.length+": "+this.anchorsForCrawl,this.outputToLog();const a=this.anchorsForCrawl.length,o=this.anchorsForCrawl,r=this;for(e=0;e<t;e++)s(e);function s(e){setTimeout((function(){const t=o[e];console.log(t),r.progress=!0,r.pacman=!1,r.msg6=t;const s=e;var l="https://api.allorigins.win/raw?url="+encodeURIComponent(t);u["a"].get(l).then(l=>{const i=l.data,n=i.replace(/\s+/g," ").trim(),u=new DOMParser,c=u.parseFromString(n,"text/html"),d=c;d.querySelectorAll("script, style, br, footer, nav, iframe").forEach(e=>e.remove());let m=d.querySelector("body").innerText.trim();console.log("Crawling:"+e+" "+t),r.msg="Crawling";const p=e+1;r.overallNumber=o.length,r.msg2=p+"/"+r.overallNumber+": "+o[e];var h="";const g=m,v=g.replace(/"/g," "),b=v.replace(/'/g," "),y=b.replace(/(\r\n|\r|\n)/g,""),f=y.trim();if(f.length<=49999){f.endsWith(".")&&(h=f,console.log("period")),f.endsWith(".")||(h=f+".",console.log("no period")),this.pageType="whole",r.logContent="📗 discourse_crawler: "+t+": page Type: whole: "+f.substring(100,0),r.outputToLog();var w=document.getElementById("specificAnalysis"),T=document.createElement("div");T.innerHTML='{"pageType":"whole","name":"'+t+'","text":"'+h+'"},',w.appendChild(T)}if(f.length>=49999){f.endsWith(".")&&(h=f.substring(49999,0),console.log("period")),f.endsWith(".")||(h=f.substring(49999,0)+".",console.log("no period")),r.pageType="partial",r.logContent="📙 discourse_crawler: "+t+": page type: partial: "+f.substring(100,0),r.outputToLog();var S=document.getElementById("specificAnalysis"),x=document.createElement("div");x.innerHTML='{"pageType":"partial","name":"'+t+'","text":"'+h+'"},',S.appendChild(x)}s===a-1&&setTimeout(()=>{r.logContent="📟 📣 discourse_crawler: quantitative prompt: "+r.promptInput+" "+r.variableOne+", "+r.variableTwo+", "+r.variableThree+", "+r.variableFour+", "+r.variableFive+", "+r.variableSix,r.outputToLog(),console.log("Delayed for 2 seconds."),r.getEmotionStats()},3e3)}).catch(e=>{console.log(e),r.msg=e,r.pageType="whole",r.logContent="📕 discourse_crawler: page type: not crawled: "+t,r.outputToLog();var a=document.getElementById("specificAnalysis"),o=document.createElement("div");o.innerHTML='{"pageType":"not_crawled","name":"'+t+'","text":null},',a.appendChild(o)})}),3e3*e)}},getEmotionStats:function(){if(!1===this.dataInput){var e=document.getElementById("specificAnalysis").innerText;const t="["+e.slice(0,-1)+"]";this.JSONHolder=JSON.parse(t)}!0===this.dataInput&&(this.JSONHolder=this.dataSet);const t=this.JSONHolder;let a="";console.log(t.length);let o,r=t.length;const s=t.length,l=this;let i=!1,n=!1;""==l.variableOne&&""==l.variableTwo&&""==l.variableTwo&&""==l.variableThree&&""==l.variableFour&&""==l.variableFive&&""==l.variableSix||(i=!0,l.noQuantUsed=!1),""==l.variableOne&&""==l.variableTwo&&""==l.variableThree&&""==l.variableFour&&""==l.variableFive&&""==l.variableSix&&(n=!0,l.noQuantUsed=!0);var c="",d="",m="",p="",h="",g="";if(""!=l.variableTwo&&""!=l.variableThree&&""!=l.variableFour&&""!=l.variableFive&&""!=l.variableSix&&(c=", ",d=", ",m=", ",p=", ",h=", and ",g='{"'+l.variableOne+'": number score,"'+l.variableTwo+'": number score,"'+l.variableThree+'": number score,"'+l.variableFour+'": number score,"'+l.variableFive+'": number score,"'+l.variableSix+'": number score}'),""!=l.variableTwo&&""!=l.variableThree&&""!=l.variableFour&&""!=l.variableFive&&""==l.variableSix&&(a="Assign any instances of emptyValue a number score of null. ",l.variableSix="emptyValue6",c=", ",d=", ",m=", ",p=", and ",h="",g='{"'+l.variableOne+'": number score,"'+l.variableTwo+'": number score,"'+l.variableThree+'": number score,"'+l.variableFour+'": number score,"'+l.variableFive+'": number score,"'+l.variableSix+'": number score}'),""!=l.variableTwo&&""!=l.variableThree&&""!=l.variableFour&&""==l.variableFive&&""==l.variableSix&&(a="Assign any instances of emptyValue a number score of null. ",l.variableFive="emptyValue5",l.variableSix="emptyValue6",c=", ",d=", ",m=", and ",p="",h="",g='{"'+l.variableOne+'": number score,"'+l.variableTwo+'": number score,"'+l.variableThree+'": number score,"'+l.variableFour+'": number score,"'+l.variableFive+'": number score,"'+l.variableSix+'": number score}'),""!=l.variableTwo&&""!=l.variableThree&&""==l.variableFour&&""==l.variableFive&&""==l.variableSix&&(a="Assign any instances of emptyValue a number score of null. ",l.variableFour="emptyValue4",l.variableFive="emptyValue5",l.variableSix="emptyValue6",c=", ",d=", and ",m="",p="",h="",g='{"'+l.variableOne+'": number score,"'+l.variableTwo+'": number score,"'+l.variableThree+'": number score,"'+l.variableFour+'": number score,"'+l.variableFive+'": number score,"'+l.variableSix+'": number score}'),""!=l.variableTwo&&""==l.variableThree&&""==l.variableFour&&""==l.variableFive&&""==l.variableSix&&(a="Assign any instances of emptyValue a number score of null. ",l.variableThree="emptyValue3",l.variableFour="emptyValue4",l.variableFive="emptyValue5",l.variableSix="emptyValue6",c=" and ",d="",m="",p="",h="",g='{"'+l.variableOne+'": number score,"'+l.variableTwo+'": number score,"'+l.variableThree+'": number score,"'+l.variableFour+'": number score,"'+l.variableFive+'": number score,"'+l.variableSix+'": number score}'),""==l.variableTwo&&""==l.variableThree&&""==l.variableFour&&""==l.variableFive&&""==l.variableSix&&(a="Assign any instances of emptyValue a number score of null. ",l.variableTwo="emptyValue2",l.variableThree="emptyValue3",l.variableFour="emptyValue4",l.variableFive="emptyValue5",l.variableSix="emptyValue6",c="",d="",m="",p="",h="",g='{"'+l.variableOne+'": number score,"'+l.variableTwo+'": number score,"'+l.variableThree+'": number score,"'+l.variableFour+'": number score,"'+l.variableFive+'": number score,"'+l.variableSix+'": number score}'),1==i)for(o=0;o<r;o++)v(o);function v(e){setTimeout((function(){console.log("Analyzing Emotion");const o=t[e].name,r=e,i=t[e].text,n=t[e].pageType;if(console.log(l.promptInput+l.variableOne+c+l.variableTwo+d+l.variableThree+m+l.variableFour+p+l.variableFive+h+l.variableSix+", returning the response in JSON."+a+"Format as"+g+". Do not include any text other than the JSON in the response. Text: "+i),null!=i){const t=u["a"].create({headers:{Authorization:"Bearer "+l.apiKEY}}),v={model:l.analysisModel,messages:[{role:"user",content:l.promptInput+l.variableOne+c+l.variableTwo+d+l.variableThree+m+l.variableFour+p+l.variableFive+h+l.variableSix+", returning the response in JSON. "+a+"Format as"+g+". Do not include any text other than the JSON. Text: "+i}],temperature:0};t.post(l.apiURL,v).then(t=>{l.pacman=!0,document.getElementById("mainTitle").style.color="hotpink",l.msg="Running Quantitative Analysis",l.loader=!1;const a=e+1;l.msg2=a+"/"+l.overallNumber+": "+o;const r=t.data.choices[0].message.content,s=r.substring(r.indexOf("{"));l.logContent="📟 discourse_crawler: quantitative results for: "+o+": "+s,l.outputToLog(),console.log(e+": "+s);const u=JSON.parse(s);l.one=u[l.variableOne],l.two=u[l.variableTwo],l.three=u[l.variableThree],l.four=u[l.variableFour],l.five=u[l.variableFive],l.six=u[l.variableSix];var c=document.getElementById("specificAnalysis2"),d=document.createElement("div");d.innerHTML='{"pageType":"'+n+'","name":"'+o+'","text":"'+i+'","'+l.variableOne+'":'+l.one+',"'+l.variableTwo+'":'+l.two+',"'+l.variableThree+'":'+l.three+',"'+l.variableFour+'":'+l.four+',"'+l.variableFive+'":'+l.five+',"'+l.variableSix+'":'+l.six+"},",c.appendChild(d)}).catch(e=>{console.log(e),l.msg=e,l.logContent="💀 📟 discourse_crawler: quantitative analysis error: "+e,l.outputToLog()}),r===s-1&&setTimeout(()=>{console.log("Quant delayed for 3 seconds."),l.logContent="💡 📣 discourse_crawler: qualitative prompt: "+l.promptInput2,l.outputToLog(),l.getMoralFoundations()},5e3)}if(null==i){var v=document.getElementById("specificAnalysis2"),b=document.createElement("div");b.innerHTML='{"pageType":"not_crawled","name":"'+o+'","text":null,"'+l.variableOne+'":null,"'+l.variableTwo+'":null,"'+l.variableThree+'":null,"'+l.variableFour+'":null,"'+l.variableFive+'":null,"'+l.variableSix+'":null},',v.appendChild(b)}}),l.delayTime*e)}if(1==n)for(l.variableOne="emptyValue1",l.variableTwo="emptyValue2",l.variableThree="emptyValue3",l.variableFour="emptyValue4",l.variableFive="emptyValue5",l.variableSix="emptyValue6",l.pacman=!0,o=0;o<r;o++){const e=t[o].name,a=t[o].text,s=t[o].pageType;var b=document.getElementById("specificAnalysis2"),y=document.createElement("div");y.innerHTML='{"pageType":"'+s+'","name":"'+e+'","text":"'+a+'","'+l.variableOne+'":'+l.one+',"'+l.variableTwo+'":'+l.two+',"'+l.variableThree+'":'+l.three+',"'+l.variableFour+'":'+l.four+',"'+l.variableFive+'":'+l.five+',"'+l.variableSix+'":'+l.six+"},",b.appendChild(y),o==r-2&&setTimeout(()=>{l.logContent="💡 📣 discourse_crawler: qualitative prompt: "+l.promptInput2,l.outputToLog(),console.log("Quant delayed for 3 seconds."),l.getMoralFoundations()},3e3)}},getMoralFoundations:function(){var e=document.getElementById("specificAnalysis2").innerText;const t="["+e.slice(0,-1)+"]",a=JSON.parse(t);let o,r=a.length;const s=a.length,l=this;for(o=0;o<r;o++)i(o);function i(e){setTimeout((function(){console.log("Analyzing moral foundations");const t=a[e].name,o=e,r=a[e][l.variableOne],i=a[e][l.variableTwo],n=a[e][l.variableThree],c=a[e][l.variableFour],d=a[e][l.variableFive],m=a[e][l.variableSix],p=a[e].text,h=a[e].pageType;if(null!=p){const a=u["a"].create({headers:{Authorization:"Bearer "+l.apiKEY}}),g={model:l.analysisModel,messages:[{role:"user",content:l.promptInput2+p}],temperature:0};a.post(l.apiURL,g).then(a=>{l.loader=!0,document.getElementById("mainTitle").style.color="orange",l.msg="Running Qualitative Analysis",l.loader2=!1;const o=e+1;l.msg2=o+"/"+l.overallNumber+": "+t,console.log(a.data.choices[0].message.content);const s=a.data.choices[0].message.content.replaceAll('"',"");l.moralFoundationAnalysis=s.replaceAll("'",""),l.logContent="💡 discourse_crawler: qualitative analysis for: "+t+": "+l.moralFoundationAnalysis,l.outputToLog();var u=document.getElementById("specificAnalysis3"),g=document.createElement("div");g.innerHTML='{"pageType":"'+h+'","name":"'+t+'","text":"'+p+'","qualResponse":"'+l.moralFoundationAnalysis+'","'+l.variableOne+'":'+r+',"'+l.variableTwo+'":'+i+',"'+l.variableThree+'":'+n+',"'+l.variableFour+'":'+c+',"'+l.variableFive+'":'+d+',"'+l.variableSix+'":'+m+"},",u.appendChild(g)}).catch(e=>{console.log(e),l.msg=e,l.logContent="💀 💡 discourse_crawler: qualitative analysis error: "+e,l.outputToLog()}),o===s-1&&setTimeout(()=>{console.log("Qual delayed for 5 seconds."),l.returnJSON()},l.mistralDelay)}if(null==p){var g=document.getElementById("specificAnalysis3"),v=document.createElement("div");v.innerHTML='{"pageType":"not_crawled","name":"'+t+'","text":"null","qualResponse":null,"'+l.variableOne+'":null,"'+l.variableTwo+'":null,"'+l.variableThree+'":null,"'+l.variableFour+'":null,"'+l.variableFive+'":null,"'+l.variableSix+'":null},',g.appendChild(v)}}),l.delayTime*e)}},returnJSON:function(){document.getElementById("mainTitle").style.color="#71c68b",this.loader2=!0,this.msg="",this.msg2="",this.space=!0,this.msg7="Finishing Up",this.progress=!1;var e=document.getElementById("specificAnalysis3").innerText,t="["+e.slice(0,-1)+"]";const a=t.replace(/(\r\n|\r|\n)/g,""),o=a.trim();this.JSON3=o,console.log("JSON2: "+this.JSON3);var r=document.getElementById("specificAnalysis4"),s=document.createElement("div");s.innerHTML=this.JSON3,r.appendChild(s),setTimeout(()=>{console.log("Delayed for 1 second."),document.getElementById("visuals").style.display="block",this.renderVisuals()},2e3)},renderVisuals:function(){var e=document.getElementById("specificAnalysis4").innerText;if(this.JSON4=JSON.parse(e),this.msg2="Rendering Overall Text Summaries",null!=this.JSON4){document.getElementById("progressColor").style.backgroundColor="hotpink",document.getElementById("messageTwo").style.color="hotpink",this.msg2="Rendering Overall Text Summaries";var t,a=this.JSON4.length;for(t=0;t<a;t++){const e=this.JSON4[t].name,s=this.JSON4[t][this.variableOne],l=this.JSON4[t][this.variableTwo],i=this.JSON4[t][this.variableThree],n=this.JSON4[t][this.variableFour],u=this.JSON4[t][this.variableFive],c=this.JSON4[t][this.variableSix],d=this.JSON4[t].qualResponse,m=this.JSON4[t].pageType,p=t+1;var o=document.getElementById("visuals"),r=document.createElement("div");r.innerHTML="<h2 style='color:#66FF79;font-size:46px;'>"+p+"/"+this.overallNumber+"</h2><h2 style='color:hotpink;font-size:46px;'>"+e+"</h2><h3 style='color:hotpink;'>Qualitative Analysis </h3><p style='color:white;'>"+d+"</p><h3 style='color:orange;'>Quantitative Analysis </h3><ul style='color:orange;list-style:none;margin:0;'><li style='color:#ff0022;'>"+this.variableOne+": "+s+"</li><li style='color:#ffbc42;'>"+this.variableTwo+": "+l+"</li><li style='color:#0496ff;'>"+this.variableThree+": "+i+"</li><li style='color:#694d75;'>"+this.variableFour+": "+n+"</li><li style='color:#1b5299;'>"+this.variableFive+": "+u+"</li><li style='color:lightgray;'>"+this.variableSix+": "+c+"</li><h3 style='color:#71c68b;'>Whole (crawled text is <49999 Characters), Partial (crawled text is >49999 characters, so only the first 49999 characters are included in analysis), Or Not Crawled (non-html/text content, or failed page fetch)</h3><ul style='color:white;list-style:none;margin:0;'><li>"+m+"</li></ul><hr>",o.appendChild(r),t===a-1&&setTimeout(()=>{console.log("Delayed for 4 seconds."),this.msg2="";var e=document.getElementById("rawData2"),t=document.createElement("h2");t.setAttribute("id","overalExplanation3"),t.innerHTML="Raw Data",e.appendChild(t),1==this.qualQuantSummary&&this.getOverallMoralFoundationScores(),0==this.qualQuantSummary&&this.getOverallQualSummary()},4e3)}}},getOverallQualSummary:function(){var e=document.getElementById("specificAnalysis4").innerText;const t=JSON.parse(e),a=this,o="overallQual";let r="";const s=t.length;for(var l=0;l<s;l++)if(document.getElementById("progressColor").style.backgroundColor="yellow",document.getElementById("messageTwo").style.color="yellow",this.msg2="Rendering Overall Qualitative Summary",r=r+=t[l].qualResponse,l===s-1){a.overallSummaryOutput=r,a.overallSummaryOutput.endsWith(".")||(a.overallSummaryOutput=a.overallSummaryOutput+"."),a.overallSummaryOutput.endsWith(".")&&(a.overallSummaryOutput=a.overallSummaryOutput+"");const e=u["a"].create({headers:{Authorization:"Bearer "+a.apiKEY}}),t={model:a.summaryModel,messages:[{role:"user",content:"Synthesize the following statements into a brief 200 word summary that reports the overall conclusions of the statements. Statements:"+a.overallSummaryOutput}],temperature:0};e.post(a.apiURL,t).then(e=>{a.msg5=a.urlToScrape;const t=e.data.choices[0].message.content,r=t.replaceAll("'",""),s=r.replaceAll('"',"");a.overallOutputExplanation=t;var l=document.getElementById("specificAnalysis3"),i=document.createElement("div");i.innerHTML='{"pageType":"'+o+'","name":"'+a.urlToScrape+'","qualResponse":"'+s+'"},',l.appendChild(i),setTimeout(()=>{console.log("Delayed for 1 second."),this.renderOverallEmotion()},1e3)}).catch(e=>{console.log(e),this.msg=e})}},getOverallMoralFoundationScores:function(){var e=document.getElementById("specificAnalysis4").innerText;const t=JSON.parse(e),a=this,o="overallCount";let r="";const s=t.length;for(var l=0;l<s;l++)if(document.getElementById("progressColor").style.backgroundColor="yellow",document.getElementById("messageTwo").style.color="yellow",this.msg2="Rendering Overall Qualitative Summary",r=r+=t[l].qualResponse,l===s-1){a.overallSummaryOutput=r,a.overallSummaryOutput.endsWith(".")||(a.overallSummaryOutput=a.overallSummaryOutput+"."),a.overallSummaryOutput.endsWith(".")&&(a.overallSummaryOutput=a.overallSummaryOutput+"");const e=u["a"].create({headers:{Authorization:"Bearer "+a.apiKEY}}),t={model:a.summaryModel,messages:[{role:"user",content:'Analyze the contents of the following texts and give me numerical scores between 1 and 10 indicating the care, fairness, loyalty, authority, and purity represented in them formatted in JSON as {"care": numerical score,"fairness": numerical score,"loyalty": numerical score,"authority": numerical score,"purity": numerical score}. Include the json at the very beginning of the response and do not include ```s in the response. Explain those scores. Text:'+a.overallSummaryOutput}],temperature:0};e.post(a.apiURL,t).then(e=>{a.msg5=a.urlToScrape;const t=e.data.choices[0].message.content;console.log(t);const r=t.substring(t.indexOf("}")+1),s=t.substring(0,t.indexOf("}")+1);console.log(r+" : "+s);const l=JSON.parse(s),i=l.care,n=l.fairness,u=l.loyalty,c=l.authority,m=l.purity;a.overallOutputExplanation=r;const p=r.replaceAll("'",""),h=p.replaceAll('"',"");var g=document.getElementById("specificAnalysis3"),v=document.createElement("div");v.innerHTML='{"pageType":"'+o+'","name":"'+a.urlToScrape+'","overallCare":'+i+',"overallFairness":'+n+',"overallLoyalty":'+u+',"overallAuthority":'+c+',"overallPurity":'+m+',"qualOverall":"'+h+'"},',g.appendChild(v);var b=[{x:["Care","Fairness","Loyalty","Authority","Purity"],y:[i,n,u,c,m],type:"bar",marker:{color:["#bf4e30","#c6ccb2","#93ff96","#e5eafa","#78fecf"]}}],y={height:450,width:450,showlegend:!1,paper_bgcolor:"#2b2d42",plot_bgcolor:"#2b2d42",title:"Moral Foundations",font:{family:"Arial, monospace",size:25,color:"white"},margin:{l:50,r:50,b:100,t:100,pad:4}},f={responsive:!0};d.a.newPlot("overallMoralFoundations",b,y,f),setTimeout(()=>{console.log("Delayed for 1 second."),this.msg7="Finishing Up",this.progress=!1,this.renderOverallEmotion()},3e3)}).catch(e=>{console.log(e),this.msg=e})}},renderOverallEmotion:function(){var e=document.getElementById("specificAnalysis4").innerText;const t=JSON.parse(e);let a=0,o=0,r=0,s=0,l=0,i=0;console.log(t.length);const n=this;0==n.noQuantUsed&&(n.overallQuant=!0),1==n.noQuantUsed&&(document.getElementById("overallVariables").style.display="none");const u=t.length;for(var c=0;c<u;c++)if(document.getElementById("progressColor").style.backgroundColor="#92dce5",document.getElementById("messageTwo").style.color="#92dce5",this.msg2="Rendering Overall Quantitative Summary",a+=t[c][n.variableOne],o+=t[c][n.variableTwo],r+=t[c][n.variableThree],s+=t[c][n.variableFour],l+=t[c][n.variableFive],i+=t[c][n.variableSix],c===u-1){a=Math.round(a/u),o=Math.round(o/u),r=Math.round(r/u),s=Math.round(s/u),l=Math.round(l/u),i=Math.round(i/u),n.overallVariableOne=a,n.overallVariableTwo=o,n.overallVariableThree=r,n.overallVariableFour=s,n.overallVariableFive=l,n.overallVariableSix=i;var m=[{type:"pie",values:[a,o,r,s,l,i],labels:[n.variableOne,n.variableTwo,n.variableThree,n.variableFour,n.variableFive,n.variableSix],textinfo:"label+percent",textposition:"outside",marker:{colors:["#ff0022","#ffbc42","#0496ff","#694d75","#1b5299","#40434e"]}}],p={height:500,width:500,showlegend:!1,paper_bgcolor:"#2b2d42",title:"",font:{family:"Avenir, Helvetica, Arial, sans-serif",size:20,color:"white",weight:"bold"},margin:{l:0,r:50,b:100,t:100,pad:4}},h={responsive:!0};d.a.newPlot("overallVariables",m,p,h);var g=document.getElementById("specificAnalysis3"),v=document.createElement("div");v.innerHTML='{"pageType":"overallQuant","name":"'+n.urlToScrape+'","overall_'+n.variableOne+'":'+n.overallVariableOne+',"overall_'+n.variableTwo+'":'+n.overallVariableTwo+',"overall_'+n.variableThree+'":'+n.overallVariableThree+',"overall_'+n.variableFour+'":'+n.overallVariableFour+',"overall_'+n.variableFive+'":'+n.overallVariableFive+',"overall_'+n.variableSix+'":'+n.overallVariableSix+"},",g.appendChild(v),n.rawData=!1,setTimeout(()=>{console.log("Delayed for 1 second."),n.returnJSONAgain()},3e3)}},returnJSONAgain:function(){var e=document.getElementById("specificAnalysis3").innerText,t=e;const a=t;console.log("JSON2: "+a);const o=document.getElementById("specificAnalysis5");o.innerHTML="";var r=document.getElementById("specificAnalysis5"),s=document.createElement("div");s.innerHTML=a,r.appendChild(s),this.showPrint=!1,document.getElementById("specificAnalysis4").style.display="none",document.getElementById("specificAnalysis").style.display="none",this.msg5=this.urlToScrape,this.logContent="🎉 discourse_crawler: analysis complete",this.outputToLog();const l=p()({userAgent:"Googlebot",allowOnNeutral:!1});l.clearCache(),this.msg="",this.msg7="",this.progress=!0,this.space=!1,document.getElementById("progressColor").style.backgroundColor="#71c68b",document.getElementById("messageTwo").style.color="#71c68b",this.msg2="Rendering Overall Data Output",this.msg="",this.showProcess2=!1},getReadabilityStats:function(){this.readability=n["gunningFog"](this.workingOutput),console.log(this.readability+" "+this.workingOutput)},reset:function(){location.reload()},unhideData:function(){document.getElementById("rawData").style.display="inline-block"},hideData:function(){document.getElementById("rawData").style.display="none"},renderData:function(){const e=new Promise((e,t)=>{this.getEmotionStats(),this.getReadabilityStats(),e("Data rendered!"),t("Data render failed")});e.then(()=>{this.constructJSON(),this.visualizeData(),this.resetWorkingOutput(),console.log("JSON and charts constructed")})},constructJSON:function(){this.currentDataObject='{"time":"'+this.workingTime+'","wpm":"'+this.wpm+'","content":"'+this.workingOutput+'","Angry":'+this.anger+',"Fear":'+this.fear+',"Excited":'+this.excitement+',"Bored":'+this.boredom+',"Sad":'+this.sadness+',"Happy":'+this.happiness+',"volume":'+this.volumeValue+',"readability":'+this.readability+',"faceAnger":'+this.faceAngry+',"faceDisgust":'+this.faceDisgusted+',"faceFear":'+this.faceFearful+',"faceHappiness":'+this.faceHappy+',"faceNeutral":'+this.faceNeutral+',"faceSadness":'+this.faceSad+',"faceSurprise":'+this.faceSurprised+"},";var e=document.getElementById("rawData");e.innerHTML+=this.currentDataObject,this.overallDataObject=document.getElementById("rawData").innerHTML},pdfResults:function(){this.showPrint=!0,this.msg="",document.getElementById("log").style.height="100%",setTimeout(()=>{this.prepForPrinting()},500)},prepForPrinting:function(){this.saveJSON(),window.print(),this.showPrint=!1,document.getElementById("log").style.height="100%"},saveJSON:function(){const e=document.getElementById("specificAnalysis5").innerText,t="["+e.slice(0,-1)+"]";console.log("downloadable data?"+t);var a="data:text/json;charset=utf-8,"+encodeURIComponent(t),o=document.getElementById("downloadAnchorElem");o.setAttribute("href",a),o.setAttribute("download",this.urlToScrape+".json"),o.click()}}},g=h,v=(a("1ca0"),a("2877")),b=Object(v["a"])(g,l,i,!1,null,"7f351e0b",null),y=b.exports,f={name:"App",components:{discourse_crawler:y}},w=f,T=(a("3f2e"),Object(v["a"])(w,r,s,!1,null,null,null)),S=T.exports;o["a"].config.productionTip=!1,new o["a"]({render:e=>e(S)}).$mount("#app")},"954a":function(e,t,a){}});
//# sourceMappingURL=app.73aaf599.js.map